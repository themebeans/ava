!function(t){"use strict";function a(){var a=this;a.classMobileMenuOpen="mobile-menu-open",a.classWidgetPanelOpen="widget-panel-open",a.$window=t(window),a.$document=t(document),a.$html=t("html"),a.$body=t("body"),a.$pageOverlay=t("#cart--overlay"),a.$widgetPanelOverlay=t("#cart--overlay"),a.$widgetPanel=t("#minicart-panel"),a.widgetPanelAnimSpeed=250,a.panelsAnimSpeed=200,a.init()}t.AvaExtensions||(t.AvaExtensions={}),a.prototype={init:function(){var t=this;t.$html.hasClass("history")?(t.hasPushState=!0,window.history.replaceState({nmShop:!0},"",window.location.href)):t.hasPushState=!1,t.widgetPanelPrep();var a=window.navigator.userAgent,e=a.indexOf("MSIE ");e>0&&t.$html.addClass("ava-old-ie"),t.isTouch=!!t.$html.hasClass("touch"),t.loadExtension(),t.bind()},loadExtension:function(){var a=this;t.AvaExtensions.shop&&t.AvaExtensions.shop.call(a),t.AvaExtensions.singleProduct&&t.AvaExtensions.singleProduct.call(a),t.AvaExtensions.cart&&t.AvaExtensions.cart.call(a),t.AvaExtensions.checkout&&t.AvaExtensions.checkout.call(a)},pageIsScrollable:function(){return document.body.scrollHeight>document.body.clientHeight},urlGetParameter:function(t){var a,e,n=decodeURIComponent(window.location.search.substring(1)),o=n.split("&");for(e=0;e<o.length;e++)if(a=o[e].split("="),a[0]===t)return void 0===a[1]||a[1]},updateUrlParameter:function(t,a,e){var n=t.indexOf("#"),o=n===-1?"":t.substr(n);t=n===-1?t:t.substr(0,n);var i=new RegExp("([?&])"+a+"=.*?(&|$)","i"),r=t.indexOf("?")!==-1?"&":"?";return t=t.match(i)?t.replace(i,"$1"+a+"="+e+"$2"):t+r+a+"="+e,t+o},setPushState:function(t){var a=this;a.hasPushState&&window.history.pushState({nmShop:!0},"",t)},bind:function(){var a=this;a.$widgetPanel.length&&a.widgetPanelBind(),t("#cart--overlay, #cart--overlay").bind("click",function(){var e=t(this);a.widgetPanelHide(),e.addClass("fade-out"),setTimeout(function(){e.removeClass("show fade-out")},a.panelsAnimSpeed)})},widgetPanelPrep:function(){var a=this;a.cartPanelAjax=null,a.quantityInputsBindButtons(a.$widgetPanel),a.$widgetPanel.on("blur","select.qty",function(){var e=t(this),n=parseFloat(e.val()),o=parseFloat(e.attr("max"));""!==n&&"NaN"!==n||(n=0),"NaN"===o&&(o=""),n>o&&(e.val(o),n=o),n>0&&a.widgetPanelCartUpdate(e)}),a.$document.on("nm_qty_change",function(e,n){a.$body.hasClass(a.classWidgetPanelOpen)&&a.widgetPanelCartUpdate(t(n))})},widgetPanelBind:function(){var a=this;a.isTouch&&(a.$widgetPanelOverlay.on("touchmove",function(t){t.preventDefault()}),a.$widgetPanel.on("touchmove",function(t){t.stopPropagation()})),t("#cart--button").bind("click",function(t){t.preventDefault(),a.widgetPanelShow()}),a.$widgetPanel.on("click.AvaCartPanelClose","#cart--button-continue",function(a){a.preventDefault(),t("#cart--overlay").trigger("click")}),a.$widgetPanel.on("click","#ava-cart-panel .cart_list .remove",function(t){t.preventDefault(),a.cartPanelAjax||a.widgetPanelCartRemoveProduct(this)})},widgetPanelShow:function(t){var a=this;a.$body.toggleClass("widget-panel-opening "+a.classWidgetPanelOpen),a.$widgetPanelOverlay.toggleClass("show"),setTimeout(function(){a.$body.removeClass("widget-panel-opening")},a.widgetPanelAnimSpeed)},widgetPanelHide:function(){var t=this;t.$body.addClass("widget-panel-closing"),t.$body.removeClass(t.classWidgetPanelOpen),setTimeout(function(){t.$body.removeClass("widget-panel-closing")},t.widgetPanelAnimSpeed)},widgetPanelCartRemoveProduct:function(a){var e=this,n=t(a),o=n.closest("li"),i=o.parent("ul"),r=n.data("cart-item-key");o.closest("li").addClass("loading"),e.cartPanelAjax=t.ajax({type:"POST",url:ava_wp_vars.ava_ajaxUrl,data:{action:"ava_woocommerce_minicart_remove_product",cart_item_key:r},dataType:"json",error:function(t,a,e){console.log("NM: AJAX error - widgetPanelCartRemoveProduct() - "+e),o.closest("li").removeClass("loading")},complete:function(a){e.cartPanelAjax=null;var n=a.responseJSON;n&&"1"===n.status?(o.css({"-webkit-transition":"0.2s opacity ease",transition:"0.2s opacity ease",opacity:"0"}),setTimeout(function(){o.css("display","block").slideUp(150,function(){o.remove();var a=i.children("li");1==a.length&&t("#ava-cart-panel").addClass("ava-cart-panel-empty"),e.shopReplaceFragments(n.fragments),e.$body.trigger("added_to_cart",[n.fragments,n.cart_hash,!1])})},160)):console.log("NM: Couldn't remove product from cart")}})},widgetPanelCartUpdate:function(a){var e=this;e.cartPanelAjax&&e.cartPanelAjax.abort(),a.closest("li").addClass("loading");var n={action:"ava_cart_panel_update"};n[a.attr("name")]=a.val(),e.cartPanelAjax=t.ajax({type:"POST",url:ava_wp_vars.ava_ajaxUrl,data:n,dataType:"json",complete:function(a){e.cartPanelAjax=null;var n=a.responseJSON;n&&"1"===n.status&&e.shopReplaceFragments(n.fragments),t("#ava-cart-panel .cart_list").children(".loading").removeClass("loading")}})},shopReplaceFragments:function(a){var e;t.each(a,function(a,n){e=t(n),e.length&&t(a).replaceWith(e)})},quantityInputsBindButtons:function(a){var e=this;a.off("click.nmQty").on("click.nmQty","select.qty",function(){var a=t(this),n=a.closest(".quantity").find(".qty");parseFloat(n.val()),parseFloat(n.attr("max")),parseFloat(n.attr("min")),n.attr("step");e.quantityInputsTriggerEvents(n)})},quantityInputsTriggerEvents:function(t){var a=this;t.trigger("change"),a.$document.trigger("nm_qty_change",t)}},t.Ava=a.prototype,t(document).ready(function(){new a})}(jQuery),function(t){"use strict";t.extend(t.Ava,{atc_init:function(){var t=this;t.atcBind()},atcBind:function(){var a=this;a.$body.on("click",".single_add_to_cart_button",function(e){var n=t(this),o=!1;if(o||(o=!0,t(".cart-count").addClass("is-added"),t(".cart--button").addClass("is-added"),t(".minicart-panel__container").addClass("is-added")),n.addClass("is-added").find("path").eq(0).animate({"stroke-dashoffset":0},300,function(){setTimeout(function(){n.removeClass("is-added").find("em").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){n.find("path").eq(0).css("stroke-dashoffset","19.79"),o=!1}),t(".no-csstransitions").length>0&&(n.find("path").eq(0).css("stroke-dashoffset","19.79"),o=!1)},600)}),n.is(".disabled"))return void console.log("Ava: Add-to-cart button disabled");if(n.hasClass("ava-simple-add-to-cart-button")||n.hasClass("ava-variable-add-to-cart-button")){e.preventDefault(),n.attr("disabled","disabled");var i=n.closest("form");if(!i.length)return;var r={product_id:i.find("input[name*='add-to-cart']").val(),product_variation_data:i.serialize()};a.$body.trigger("adding_to_cart",[n,r]),a.AvaAjaxSubmitForm(n,r)}})},AvaAjaxSubmitForm:function(a,e){var n=this;if(!e.product_id)return void console.log("Ava (Error): No Product ID Found");var o=wc_add_to_cart_params.wc_ajax_url.toString().replace("wc-ajax=%%endpoint%%","add-to-cart="+e.product_id+"&ava-ajax-add-to-cart=1");t.ajax({type:"POST",url:o,data:e.product_variation_data,dataType:"html",cache:!1,headers:{"cache-control":"no-cache"},error:function(t,a,e){console.log("Ava: AJAX error - AvaAjaxSubmitForm() - "+e)},success:function(e){var o=t("<div>"+e+"</div>"),i="",r={".cart-count":o.find(".cart-count").prop("outerHTML"),"#ava-cart-panel":o.find("#ava-cart-panel").prop("outerHTML")};n.shopReplaceFragments(r),n.$body.trigger("added_to_cart",[r,i]),a.removeAttr("disabled"),o.empty()}})}}),t.AvaExtensions.add_to_cart=t.Ava.atc_init}(jQuery),function(t){"use strict";t.extend(t.Ava,{cart_init:function(){var a=this;a.quantityInputsBindButtons(t(".woocommerce"))},cartTriggerUpdate:function(){var a=t('div.woocommerce > form input[name="update_cart"]');a.prop("disabled",!1),setTimeout(function(){a.trigger("click")},100)}}),t.AvaExtensions.cart=t.Ava.cart_init}(jQuery),function(t){"use strict";t.extend(t.Ava,{shop_init:function(){var t=this;"undefined"!=typeof wc_add_to_cart_params&&"yes"!==wc_add_to_cart_params.cart_redirect_after_add?(t.$body.on("adding_to_cart",function(t,a,e){}),t.$body.on("added_to_cart",function(a,e,n){t.$widgetPanel.length||t.$widgetPanelOverlay.trigger("click")})):t.$document.off("click",".add_to_cart_button"),t.shopLoadExtension()},shopLoadExtension:function(){var a=this;"0"!==ava_wp_vars.ava_shopAjaxAddToCart&&t.AvaExtensions.add_to_cart&&t.AvaExtensions.add_to_cart.call(a)}}),t.AvaExtensions.shop=t.Ava.shop_init}(jQuery);